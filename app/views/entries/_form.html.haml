= form_with model: entry, local: true do |form|
  = render 'shared/error_messages', errors: entry.errors

  = fields model: entry.song do |song_form|
    .form-group
      = song_form.label :live_id
      = song_form.collection_select :live_id, Live.unpublished.newest_order, :id, :title, {}, class: 'form-control'

    = render 'songs/form', form: song_form

  %div.mb-3{ data: { controller: 'form-available-times' } }
    %template{ data: { target: 'form-available-times.template' } }
      = form.fields_for :available_times, AvailableTime.new, child_index: 'TEMPLATE_INDEX' do |available_times_form|
        = render 'form_available_time', form: available_times_form

    = form.fields_for :available_times do |available_times_form|
      = render 'form_available_time', form: available_times_form

    %button.btn.btn-light{ type: 'button', data: { action: 'form-available-times#addAvailableTime' } }= icon('fas', 'plus-circle', '演奏可能時間を追加する')

  .form-group
    = form.label :notes
    = form.text_area :notes, class: 'form-control'

  = form.submit class: 'btn btn-primary'
