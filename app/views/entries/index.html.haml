- provide(:title, @live.title)
%header.page-header.d-flex.flex-column.flex-md-row.justify-content-between.align-items-md-center
  %h1<
    = @live.name
    %small.text-muted
      = @live.date_and_place
  = @live.new_entry_link class: 'btn btn-info btn-lg'

- if current_user.admin_or_elder?
  %aside.btn-toolbar.justify-content-end.mb-3#admin-tools{ role: 'toolbar' }
    - if policy(@live).publish?
      .btn-group.mr-2{ role: 'group' }
        = @live.publish_link data: { confirm: "エントリーの受付を終了し，セットリストを公開します。\nこの操作は取り消せません。" }, class: 'btn btn-outline-warning'
    - if current_user&.admin?
      .btn-group.mr-2{ rold: 'group' }
        = link_to icon('fas', 'edit') + ' ' + '曲を編集する', live_entries_path(@live, edit: true), class: 'btn btn-outline-secondary'
    .btn-group{ role: 'group' }
      = @live.edit_link class: 'btn btn-outline-primary'
      - if @live.songs.blank?
        = @live.delete_link class: 'btn btn-outline-danger'

%p.text-right<
  全
  %b= @songs.size
  件

- if params[:edit].present? && current_user&.admin?
  = render partial: 'songs/form_easy', collection: @songs, as: :song
- else
  .song-list
    = render @songs
