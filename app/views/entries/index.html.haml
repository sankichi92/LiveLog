- provide(:title, @live.title)
%header.page-header.d-flex.flex-column.flex-md-row.justify-content-between.align-items-md-center
  %h1<
    = @live.name
    %small.text-muted
      = @live.place.present? ? " #{l(@live.date)} @#{@live.place} " : l(@live.date)
  = link_to icon('fas', 'paper-plane') + ' エントリーする', new_live_entry_path(@live), class: 'btn btn-info btn-lg'

- if current_user.admin_or_elder?
  %aside.btn-toolbar.justify-content-end.mb-3#admin-tools{ role: 'toolbar' }
    - if policy(@live).publish?
      .btn-group.mr-2{ role: 'group' }
        = link_to 'Publish',
                  publish_live_path(@live),
                  method: :put,
                  data: { confirm: "エントリーの受付を終了し，セットリストを公開します。\nこの操作は取り消せません。" },
                  class: 'btn btn-outline-warning',
                  'data-toggle': 'tooltip',
                  'data-placement': 'left',
                  title: 'エントリーの受付を終了し，セットリストを公開します'
    .btn-group{ role: 'group' }
      = link_to icon('fas', 'edit') + ' Edit', edit_live_path(@live), class: 'btn btn-outline-primary'
      - if @live.songs.blank?
        = link_to icon('fas', 'trash') + ' Delete', @live, method: :delete, class: 'btn btn-outline-danger'

%p.text-right<
  全
  %b= @songs.size
  件
.song-list
  = render @songs
